(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8475],{62034:function(n,e,r){var t=r(65067),o=r(95882);n.exports=function n(e,r,c,u,i){var l=-1,a=e.length;for(c||(c=o),i||(i=[]);++l<a;){var s=e[l];r>0&&c(s)?r>1?n(s,r-1,c,u,i):t(i,s):u||(i[i.length]=s)}return i}},95882:function(n,e,r){var t=r(50857),o=r(79631),c=r(86152),u=t?t.isConcatSpreadable:void 0;n.exports=function(n){return c(n)||o(n)||!!(u&&n&&n[u])}},35838:function(n,e,r){var t=r(62034),o=r(16760);n.exports=function(n,e){return t(o(n,e),1)}},16760:function(n,e,r){var t=r(50343),o=r(68286),c=r(93401),u=r(86152);n.exports=function(n,e){return(u(n)?t:c)(n,o(e,3))}},44980:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return D}});var t,o,c,u,i=r(70865),l=r(87394),a=r(92228),s=r(52322),f=r(7599),d=r(65957),h=r(3411),p=r(8659),v=r(76903),b=r(13670),g=r(69689),y=r(89495),k=r(11781),x=r(72135),m=r(98788),N=r(5163),Z=r(2784),j=r(6647),B=r(11536),O=r(10494),S=r(68175);function C(){var n=(0,a.Z)(['\n            query getNftMarketSubgraphHealth {\n              indexingStatusForCurrentVersion(subgraphName: "','") {\n                health\n                chains {\n                  chainHeadBlock {\n                    number\n                  }\n                  latestBlock {\n                    number\n                  }\n                }\n              }\n            }\n          ']);return C=function(){return n},n}(R=t||(t={}))[R.OK=0]="OK",R[R.WARNING=1]="WARNING",R[R.NOT_OK=2]="NOT_OK",R[R.UNKNOWN=3]="UNKNOWN";var I=function(n){var e=(0,Z.useState)({status:t.UNKNOWN,currentBlock:0,chainHeadBlock:0,latestBlock:0,blockDifference:0}),r=e[0],o=e[1];return(0,S.X)(function(e){var r;(r=(0,m.Z)(function(){var r,c,u,i,a,s,f,d,h;return(0,N.__generator)(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,Promise.all([(0,j.request)(O.AM,(0,j.gql)(C(),n)),e?Promise.resolve(e):B.v.getBlockNumber()])];case 1:return c=(r=l.Z.apply(void 0,[p.sent(),2]))[0].indexingStatusForCurrentVersion,u=r[1],i="healthy"===c.health,a=parseInt(c.chains[0].chainHeadBlock.number),s=parseInt(c.chains[0].latestBlock.number),f=u-s,d=u-a,!i||f>200||d>200?o({status:t.NOT_OK,currentBlock:u,chainHeadBlock:a,latestBlock:s,blockDifference:f}):f>50||d>50?o({status:t.WARNING,currentBlock:u,chainHeadBlock:a,latestBlock:s,blockDifference:f}):o({status:t.OK,currentBlock:u,chainHeadBlock:a,latestBlock:s,blockDifference:f}),[3,3];case 2:return h=p.sent(),console.error("Failed to perform health check for ".concat(n," subgraph"),h),[3,3];case 3:return[2]}})}),function(){return r.apply(this,arguments)})()},[n]),r};function w(){var n=(0,a.Z)(["\n  border-radius: 8px;\n  > div {\n    border-radius: 8px;\n  }\n  user-select: none;\n"]);return w=function(){return n},n}function A(){var n=(0,a.Z)(["\n  gap: 7px;\n"]);return A=function(){return n},n}function K(){var n=(0,a.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ",";\n"]);return K=function(){return n},n}var R,_=(0,h.ZP)(p.Z).withConfig({componentId:"sc-46961c6e-0"})(w()),E=(0,h.ZP)(v.Z).withConfig({componentId:"sc-46961c6e-1"})(A()),F=(0,h.ZP)(b.Z).withConfig({componentId:"sc-46961c6e-2"})(K(),function(n){var e=n.$color;return n.theme.colors[e]}),P=function(n){var e=n.color,r=n.label,t=n.description,o=n.currentBlock,c=n.secondRemainingBlockSync,u=n.blockNumberFromSubgraph,i=(0,d.$G)().t;return(0,s.jsxs)(b.Z,{children:[(0,s.jsxs)(E,{pb:"10px",children:[(0,s.jsx)(F,{$color:e}),(0,s.jsx)(y.Z,{children:r})]}),(0,s.jsx)(y.Z,{pb:"24px",children:t}),(0,s.jsxs)(y.Z,{children:[(0,s.jsxs)("strong",{children:[i("Chain Head Block"),":"]})," ",o]}),(0,s.jsxs)(y.Z,{children:[(0,s.jsxs)("strong",{children:[i("Latest Subgraph Block"),":"]})," ",u]}),(0,s.jsxs)(y.Z,{children:[(0,s.jsxs)("strong",{children:[i("Delay"),":"]})," ",o-u," (",c,"s)"]})]})},D=function(n){var e,r,a,h=n.subgraphName,p=n.inline,v=n.customDescriptions,m=n.obeyGlobalSetting,N=(0,d.$G)().t,Z=I(h),j=Z.status,B=Z.currentBlock,O=Z.blockDifference,S=Z.latestBlock,C=(0,l.Z)((0,x.YF)(),1)[0],w=j===t.WARNING||j===t.NOT_OK,A={delayed:{label:N("Delayed"),color:"failure",description:null!==(o=null==v?void 0:v.delayed)&&void 0!==o?o:N("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},slow:{label:N("Slight delay"),color:"warning",description:null!==(c=null==v?void 0:v.slow)&&void 0!==c?c:N("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},healthy:{label:N("Fast"),color:"success",description:null!==(u=null==v?void 0:v.healthy)&&void 0!==u?u:N("No issues with the subgraph.")}},K=O*f.hJ,R=A[j===t.NOT_OK?"delayed":j===t.WARNING?"slow":"healthy"],D=(0,g.Z)((0,s.jsx)(P,(0,i.Z)({currentBlock:B,secondRemainingBlockSync:K,blockNumberFromSubgraph:S},R)),{placement:"top"}),G=D.targetRef,H=D.tooltipVisible,W=D.tooltip;return S&&B&&((void 0===m||m)&&C||w)?p?(0,s.jsxs)(E,{alignItems:"center",justifyContent:"flex-end",ref:G,children:[(0,s.jsx)(F,{$color:R.color}),(0,s.jsx)(y.Z,{children:R.label}),(0,s.jsx)(k.Z,{}),H&&W]}):(0,s.jsxs)(b.Z,{position:"fixed",bottom:"calc(55px + env(safe-area-inset-bottom))",right:"5%",ref:G,"data-test":"subgraph-health-indicator",children:[H&&W,(0,s.jsx)(_,{children:(0,s.jsxs)(E,{alignItems:"center",p:"10px",children:[(0,s.jsx)(F,{$color:R.color}),(0,s.jsx)(y.Z,{children:R.label}),(0,s.jsx)(k.Z,{})]})})]}):null}},68175:function(n,e,r){"use strict";r.d(e,{X:function(){return s},a:function(){return a}});var t=r(50930),o=r(74086),c=r(2784),u=r(49857),i=r(76166),l=[];function a(n,e){var r=(0,i.g)().chainId,a=(0,u.ZP)(r&&[o.sR,"blockNumber",r]).data,s=void 0===a?0:a;(0,c.useEffect)(n.bind(null,s),[s].concat((0,t.Z)(e||l)))}function s(n,e){var r=(0,i.g)().chainId,a=(0,u.ZP)(r&&[o.KI,"blockNumber",r]).data,s=void 0===a?0:a;(0,c.useEffect)(n.bind(null,s),[s].concat((0,t.Z)(e||l)))}},5994:function(n,e,r){"use strict";r.d(e,{P1:function(){return c}});var t="NOT_FOUND",o=function(n,e){return n===e},c=function(n){for(var e=arguments.length,r=Array(e>1?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return function(){for(var e,t=arguments.length,o=Array(t),c=0;c<t;c++)o[c]=arguments[c];var u=0,i={memoizeOptions:void 0},l=o.pop();if("object"==typeof l&&(i=l,l=o.pop()),"function"!=typeof l)throw Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var a=i.memoizeOptions,s=void 0===a?r:a,f=Array.isArray(s)?s:[s],d=function(n){var e=Array.isArray(n[0])?n[0]:n;if(!e.every(function(n){return"function"==typeof n}))throw Error("createSelector expects all input-selectors to be functions, but received the following types: ["+e.map(function(n){return"function"==typeof n?"function "+(n.name||"unnamed")+"()":typeof n}).join(", ")+"]");return e}(o),h=n.apply(void 0,[function(){return u++,l.apply(null,arguments)}].concat(f)),p=n(function(){for(var n=[],r=d.length,t=0;t<r;t++)n.push(d[t].apply(null,arguments));return e=h.apply(null,n)});return Object.assign(p,{resultFunc:l,memoizedResultFunc:h,dependencies:d,lastResult:function(){return e},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),p}}(function(n,e){var r,c,u,i="object"==typeof e?e:{equalityCheck:e},l=i.equalityCheck,a=i.maxSize,s=void 0===a?1:a,f=i.resultEqualityCheck,d=(r=void 0===l?o:l,function(n,e){if(null===n||null===e||n.length!==e.length)return!1;for(var t=n.length,o=0;o<t;o++)if(!r(n[o],e[o]))return!1;return!0}),h=1===s?{get:function(n){return u&&d(u.key,n)?u.value:t},put:function(n,e){u={key:n,value:e}},getEntries:function(){return u?[u]:[]},clear:function(){u=void 0}}:function(n,e){var r=[];function o(n){var o=r.findIndex(function(r){return e(n,r.key)});if(o>-1){var c=r[o];return o>0&&(r.splice(o,1),r.unshift(c)),c.value}return t}function c(){return r}return{get:o,put:function(e,c){o(e)===t&&(r.unshift({key:e,value:c}),r.length>n&&r.pop())},getEntries:c,clear:function(){r=[]}}}(s,d);function p(){var e=h.get(arguments);if(e===t){if(e=n.apply(null,arguments),f){var r=h.getEntries().find(function(n){return f(n.value,e)});r&&(e=r.value)}h.put(arguments,e)}return e}return p.clearCache=function(){return h.clear()},p})}}]);
//# sourceMappingURL=8475.49cc433d81b181e1.js.map