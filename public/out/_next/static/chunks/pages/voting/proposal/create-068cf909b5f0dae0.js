(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{46109:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/voting/proposal/create",function(){return n(45797)}])},45797:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eq}});var r=n(98788),a=n(47842),c=n(70865),i=n(96670),o=n(87394),s=n(5163),d=n(52322),l=n(22723),u=n(11298),p=n(13670),h=n(36820),m=n(89495),x=n(13023),f=n(8659),_=n(3397),k=n(48497),g=n(95134),Z=n(76903),b=n(35378),j=n(48608),v=n(73685),y=n(9270),T=n(24611),C=n.n(T),w=n(45455),D=n.n(w),P=n(61258),B=n.n(P),I=n(2784),S=n(26488),E=n(65957),q=n(34766),M=n(39480),Y=n(64548),A=n(98757),F=n(93159),V=n(25237),N=n.n(V),G=n(39097),H=n.n(G),L=n(5632),z=n(5305),O=n(26297),R=n(37726),$=n.n(R);n(88930);var Q=function(e){var t=e.inputProps,n=(0,O.Z)(e,["inputProps"]);return(0,d.jsx)($(),(0,c.Z)({customInput:(0,d.jsx)(x.Z,(0,c.Z)({},void 0===t?{}:t)),portalId:"reactDatePicker",dateFormat:"PPP"},n))},X=n(92228),J=n(3411);function K(){var e=(0,X.Z)(["\n  .react-datepicker-wrapper,\n  .react-datepicker__input-container {\n    display: block;\n  }\n\n  .react-datepicker {\n    background: ",";\n    border-color: ",";\n    color: ",";\n    font-family: 'Kanit', sans-serif;\n  }\n\n  .react-datepicker__header {\n    background: ",";\n    border-color: ",";\n  }\n\n  .react-datepicker__current-month,\n  .react-datepicker-time__header,\n  .react-datepicker-year-header,\n  .react-datepicker__day-name,\n  .react-datepicker__day,\n  .react-datepicker__time-name {\n    color: ",";\n  }\n\n  .react-datepicker__day:hover,\n  .react-datepicker__month-text:hover,\n  .react-datepicker__quarter-text:hover,\n  .react-datepicker__year-text:hover {\n    background-color: ",";\n  }\n\n  .react-datepicker-popper[data-placement^='bottom'] .react-datepicker__triangle::before,\n  .react-datepicker-popper[data-placement^='bottom'] .react-datepicker__triangle::after {\n    border-bottom-color: ",";\n  }\n\n  .react-datepicker__day--selected,\n  .react-datepicker__day--in-selecting-range,\n  .react-datepicker__day--in-range,\n  .react-datepicker__month-text--selected,\n  .react-datepicker__month-text--in-selecting-range,\n  .react-datepicker__month-text--in-range,\n  .react-datepicker__quarter-text--selected,\n  .react-datepicker__quarter-text--in-selecting-range,\n  .react-datepicker__quarter-text--in-range,\n  .react-datepicker__year-text--selected,\n  .react-datepicker__year-text--in-selecting-range,\n  .react-datepicker__year-text--in-range {\n    background-color: ",";\n  }\n\n  .react-datepicker__day--selected:hover,\n  .react-datepicker__day--in-selecting-range:hover,\n  .react-datepicker__day--in-range:hover,\n  .react-datepicker__month-text--selected:hover,\n  .react-datepicker__month-text--in-selecting-range:hover,\n  .react-datepicker__month-text--in-range:hover,\n  .react-datepicker__quarter-text--selected:hover,\n  .react-datepicker__quarter-text--in-selecting-range:hover,\n  .react-datepicker__quarter-text--in-range:hover,\n  .react-datepicker__year-text--selected:hover,\n  .react-datepicker__year-text--in-selecting-range:hover,\n  .react-datepicker__year-text--in-range:hover {\n    background-color: ",";\n  }\n\n  .react-datepicker__day--keyboard-selected,\n  .react-datepicker__month-text--keyboard-selected,\n  .react-datepicker__quarter-text--keyboard-selected,\n  .react-datepicker__year-text--keyboard-selected {\n    background-color: ",";\n    color: #ffffff;\n  }\n\n  .react-datepicker__day--keyboard-selected:hover,\n  .react-datepicker__month-text--keyboard-selected:hover,\n  .react-datepicker__quarter-text--keyboard-selected:hover,\n  .react-datepicker__year-text--keyboard-selected:hover {\n    background-color: ",";\n    color: #ffffff;\n  }\n\n  .react-datepicker__time-container,\n  .react-datepicker__time-container .react-datepicker__time .react-datepicker__time-box {\n    width: 120px;\n  }\n\n  .react-datepicker__header--time {\n    padding: 8px;\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item {\n    height: auto;\n    padding: 8px;\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item {\n    background-color: ",";\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item--selected {\n    color: ",";\n  }\n"]);return K=function(){return e},e}var W=J.ZP.div.withConfig({componentId:"sc-1ce524b4-0"})(K(),function(e){return e.theme.card.background},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.text},function(e){return e.theme.colors.input},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.text},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.primary},function(e){return e.theme.colors.primaryBright},function(e){return e.theme.colors.secondary},function(e){return e.theme.colors.secondary},function(e){return e.theme.card.background},function(e){return e.theme.colors.cardBorder},function(e){return e.theme.colors.text}),U=function(){return(0,d.jsx)(W,{id:"reactDatePicker"})},ee=function(e){var t=(0,E.$G)().t;return(0,d.jsx)(Q,(0,c.Z)({showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:t("Time"),dateFormat:"ppp"},e))},et=n(51523),en=n(96612),er=n(62208),ea=n(5159),ec=n(19081),ei=n(93860),eo=n(36765),es=function(e){var t=e.block,n=e.onDismiss,r=(0,E.$G)().t,a=(0,ei.Z)(t),c=a.isLoading,i=a.total,o=a.cakeBalance,s=a.cakeVaultBalance,l=a.cakePoolBalance,u=a.poolsBalance,h=a.cakeBnbLpBalance,m=a.ifoPoolBalance,x=a.lockedCakeBalance,f=a.lockedEndTime,_=(0,ec.ZP)().theme,k=function(){n()};return(0,d.jsx)(er.ZP,{title:r("Voting Power"),onDismiss:k,headerBackground:_.colors.gradientCardHeader,children:(0,d.jsx)(p.Z,{mb:"24px",width:["100%","100%","100%","320px"],children:c?(0,d.jsx)(Z.Z,{height:"450px",alignItems:"center",justifyContent:"center",children:(0,d.jsx)(ea.Z,{size:80})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eo.Z,{total:i,cakeBalance:o,cakeVaultBalance:s,cakePoolBalance:l,poolsBalance:u,ifoPoolBalance:m,cakeBnbLpBalance:h,lockedCakeBalance:x,lockedEndTime:f,block:t}),(0,d.jsx)(j.Z,{variant:"secondary",onClick:n,width:"100%",mt:"16px",children:r("Close")})]})})})},ed=n(36957),el=n(50930),eu=n(74930),ep=n.n(eu),eh=n(93058),em=n(54231),ex=function(e){var t=e.onRemove,n=e.onTextInput,r=(0,O.Z)(e,["onRemove","onTextInput"]),a=(0,I.useState)(!1),o=a[0],s=a[1],l=(0,I.useState)(!1),u=l[0],h=l[1],m=function(e){var t=e.currentTarget.value;s(u&&0===t.length),h(!0),n(t)};return(0,d.jsxs)(p.Z,{position:"relative",mb:"16px",children:[(0,d.jsx)(x.Z,(0,i.Z)((0,c.Z)({},r),{onChange:m,isWarning:o})),t&&(0,d.jsx)(p.Z,{position:"absolute",right:"8px",top:"0px",zIndex:30,children:(0,d.jsx)(eh.Z,{variant:"text",onClick:t,children:(0,d.jsx)(em.Z,{})})})]})},ef=function(){return{id:ep()(),value:""}},e_=function(e){var t=e.choices,n=e.onChange,r=(0,E.$G)().t,a=t.filter(function(e){return e.value.length>0}).length>=2,c=function(){n((0,el.Z)(t).concat([ef()]))};return(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(_.Z,{children:(0,d.jsx)(k.Z,{as:"h3",scale:"md",children:r("Choices")})}),(0,d.jsxs)(g.Z,{children:[t.map(function(e,a){var c=e.id,i=e.value,o=function(e){var r=(0,el.Z)(t);r[r.findIndex(function(e){return e.id===c})].value=e,n(r)},s=function(){n(t.filter(function(e){return e.id!==c}))};return(0,d.jsx)(ex,{scale:"lg",onTextInput:o,placeholder:r("Input choice text"),value:i,onRemove:a>1?s:void 0},c)}),(0,d.jsx)(j.Z,{type:"button",onClick:c,disabled:!a,children:r("Add Choice")})]})]})},ek=n(61436),eg=n(88417),eZ=n(23855),eb=function(e,t){if(!(0,ek.Z)(e)||!(0,ek.Z)(t))return null;var n=(0,eg.Z)(e,"yyyy-MM-dd"),r=(0,eg.Z)(t,"HH:mm:ss");return(0,eZ.Z)("".concat(n,"T").concat(r)).getTime()/1e3},ej=function(e,t){var n=e.name,r=e.body,a=e.choices,c=e.startDate,i=e.startTime,o=e.endDate,s=e.endTime,d=e.snapshot,l={};n||(l.name=[t("%field% is required",{field:"Title"})]),r||(l.body=[t("%field% is required",{field:"Body"})]),a.length<2&&(l.choices=[t("Please create a minimum of %num% choices",{num:2})]);var u=a.some(function(e){return!e.value});2===a.length&&u&&(l.choices=Array.isArray(l.choices)?(0,el.Z)(l.choices).concat([t("Choices must not be empty")]):l.choices=[t("Choices must not be empty")]),(0,ek.Z)(c)||(l.startDate=[t("Please select a valid date")]),(0,ek.Z)(i)||(l.startTime=[t("Please select a valid time")]),(0,ek.Z)(o)||(l.endDate=[t("Please select a valid date")]),(0,ek.Z)(s)||(l.endTime=[t("Please select a valid time")]);var p=eb(c,i);return eb(o,s)<p&&(l.endDate=Array.isArray(l.endDate)?(0,el.Z)(l.endDate).concat([t("End date must be after the start date")]):l.endDate=[t("End date must be after the start date")]),0===d&&(l.snapshot=[t("Invalid snapshot")]),l};function ev(){var e=(0,X.Z)(["\n  color: ",";\n  display: block;\n  font-weight: 600;\n  margin-bottom: 8px;\n"]);return ev=function(){return e},e}function ey(){var e=(0,X.Z)(["\n  font-size: 20px;\n"]);return ey=function(){return e},e}function eT(){var e=(0,X.Z)(["\n  font-size: 12px;\n  text-transform: uppercase;\n"]);return eT=function(){return e},e}var eC,ew=J.ZP.label.withConfig({componentId:"sc-408fcf5-0"})(ev(),function(e){return e.theme.colors.text}),eD=(0,J.ZP)(ew).withConfig({componentId:"sc-408fcf5-1"})(ey()),eP=(0,J.ZP)(ew).withConfig({componentId:"sc-408fcf5-2"})(eT()),eB=function(e){var t=e.children;return(0,d.jsx)(m.Z,{color:"failure",mb:"4px",children:t})},eI=function(e){var t=e.errors;return(0,d.jsx)(p.Z,{mt:"8px",children:t.map(function(e){return(0,d.jsx)(eB,{children:e},e)})})},eS=new(C()).Client712("https://hub.snapshot.org"),eE=N()(function(){return Promise.all([n.e(2816),n.e(1348),n.e(4432)]).then(n.bind(n,38623))},{loadableGenerated:{webpack:function(){return[38623]}},ssr:!1}),eq=function(){var e,t=(0,I.useState)(function(){return{name:"",body:"",choices:B()(2).map(ef),startDate:null,startTime:null,endDate:null,endTime:null,snapshot:0}}),n=t[0],T=t[1],C=(0,I.useState)(!1),w=C[0],P=C[1],V=(0,I.useState)({}),N=V[0],G=V[1],O=(0,E.$G)().t,R=(0,et.mA)().address,$=(0,S.Xh)(),X=(0,L.useRouter)().push,J=(0,l.p)(),K=J.toastSuccess,W=J.toastError,er=(0,o.Z)((0,u.Z)((0,d.jsx)(es,{block:n.snapshot})),1)[0],ea=n.name,ec=n.body,ei=n.choices,eo=n.startDate,el=n.startTime,eu=n.endDate,ep=n.endTime,eh=n.snapshot,em=ej(n,O),ex=(0,y.Hp)(),ek=(e=(0,r.Z)(function(e){var t,n;return(0,s.__generator)(this,function(r){switch(r.label){case 0:e.preventDefault(),r.label=1;case 1:return r.trys.push([1,3,,4]),P(!0),[4,eS.proposal(ex,R,{space:ed.Q8,type:"single-choice",title:ea,body:ec,start:eb(eo,el),end:eb(eu,ep),choices:ei.filter(function(e){return e.value}).map(function(e){return e.value}),snapshot:eh,discussion:"",plugins:JSON.stringify({}),app:"snapshot"})];case 2:return t=r.sent(),X("/voting/proposal/".concat(t.id)),K(O("Proposal created!")),[3,4];case 3:return n=r.sent(),W(O("Error"),null==n?void 0:n.message),console.error(n),P(!1),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),eg=function(e,t){T(function(n){return(0,i.Z)((0,c.Z)({},n),(0,a.Z)({},e,t))}),G(function(t){return(0,i.Z)((0,c.Z)({},t),(0,a.Z)({},e,!0))})},eZ=function(e){var t,n=e.currentTarget;eg(n.name,n.value)},ev=function(e){eg("body",e)},ey=function(e){eg("choices",e)},eT=function(e){return function(t){eg(e,t)}},eC=(0,I.useMemo)(function(){return{hideIcons:R&&ed.F_.includes(R.toLowerCase())?[]:["guide","fullscreen","preview","side-by-side","image"]}},[R]);return(0,I.useEffect)(function(){$>0&&T(function(e){return(0,i.Z)((0,c.Z)({},e),{snapshot:$})})},[$,T]),(0,d.jsxs)(Y.Z,{py:"40px",children:[(0,d.jsx)(A.V,{}),(0,d.jsx)(p.Z,{mb:"48px",children:(0,d.jsxs)(h.Z,{children:[(0,d.jsx)(H(),{href:"/",children:O("Home")}),(0,d.jsx)(H(),{href:"/voting",children:O("Voting")}),(0,d.jsx)(m.Z,{children:O("Make a Proposal")})]})}),(0,d.jsx)("form",{onSubmit:ek,children:(0,d.jsxs)(en.Z,{children:[(0,d.jsxs)(p.Z,{children:[(0,d.jsxs)(p.Z,{mb:"24px",children:[(0,d.jsx)(eD,{htmlFor:"name",children:O("Title")}),(0,d.jsx)(x.Z,{id:"name",name:"name",value:ea,scale:"lg",onChange:eZ,required:!0}),em.name&&N.name&&(0,d.jsx)(eI,{errors:em.name})]}),(0,d.jsxs)(p.Z,{mb:"24px",children:[(0,d.jsx)(eD,{htmlFor:"body",children:O("Content")}),(0,d.jsx)(m.Z,{color:"textSubtle",mb:"8px",children:O("Tip: write in Markdown!")}),(0,d.jsx)(eE,{id:"body",name:"body",onTextChange:ev,value:ec,options:eC,required:!0}),em.body&&N.body&&(0,d.jsx)(eI,{errors:em.body})]}),ec&&(0,d.jsx)(p.Z,{mb:"24px",children:(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(_.Z,{children:(0,d.jsx)(k.Z,{as:"h3",scale:"md",children:O("Preview")})}),(0,d.jsx)(g.Z,{p:"0",px:"24px",children:(0,d.jsx)(F.Z,{children:ec})})]})}),(0,d.jsx)(e_,{choices:ei,onChange:ey}),em.choices&&N.choices&&(0,d.jsx)(eI,{errors:em.choices})]}),(0,d.jsx)(p.Z,{children:(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(_.Z,{children:(0,d.jsx)(k.Z,{as:"h3",scale:"md",children:O("Actions")})}),(0,d.jsxs)(g.Z,{children:[(0,d.jsxs)(p.Z,{mb:"24px",children:[(0,d.jsx)(eP,{children:O("Start Date")}),(0,d.jsx)(Q,{name:"startDate",onChange:eT("startDate"),selected:eo,placeholderText:"YYYY/MM/DD"}),em.startDate&&N.startDate&&(0,d.jsx)(eI,{errors:em.startDate})]}),(0,d.jsxs)(p.Z,{mb:"24px",children:[(0,d.jsx)(eP,{children:O("Start Time")}),(0,d.jsx)(ee,{name:"startTime",onChange:eT("startTime"),selected:el,placeholderText:"00:00"}),em.startTime&&N.startTime&&(0,d.jsx)(eI,{errors:em.startTime})]}),(0,d.jsxs)(p.Z,{mb:"24px",children:[(0,d.jsx)(eP,{children:O("End Date")}),(0,d.jsx)(Q,{name:"endDate",onChange:eT("endDate"),selected:eu,placeholderText:"YYYY/MM/DD"}),em.endDate&&N.endDate&&(0,d.jsx)(eI,{errors:em.endDate})]}),(0,d.jsxs)(p.Z,{mb:"24px",children:[(0,d.jsx)(eP,{children:O("End Time")}),(0,d.jsx)(ee,{name:"endTime",onChange:eT("endTime"),selected:ep,placeholderText:"00:00"}),em.endTime&&N.endTime&&(0,d.jsx)(eI,{errors:em.endTime})]}),R&&(0,d.jsxs)(Z.Z,{alignItems:"center",mb:"8px",children:[(0,d.jsx)(m.Z,{color:"textSubtle",mr:"16px",children:O("Creator")}),(0,d.jsx)(b.Z,{href:(0,z.C)(R,"address"),children:(0,q.Z)(R)})]}),(0,d.jsxs)(Z.Z,{alignItems:"center",mb:"16px",children:[(0,d.jsx)(m.Z,{color:"textSubtle",mr:"16px",children:O("Snapshot")}),(0,d.jsx)(b.Z,{href:(0,z.C)(eh,"block"),children:eh})]}),R?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Z,{type:"submit",width:"100%",isLoading:w,endIcon:w?(0,d.jsx)(v.Z,{spin:!0,color:"currentColor"}):null,disabled:!D()(em),mb:"16px",children:O("Publish")}),(0,d.jsxs)(m.Z,{color:"failure",as:"p",mb:"4px",children:[O("You need at least %count% voting power to publish a proposal.",{count:ed.V5})," "]}),(0,d.jsx)(j.Z,{scale:"sm",type:"button",variant:"text",onClick:er,p:0,children:O("Check voting power")})]}):(0,d.jsx)(M.Z,{width:"100%",type:"button"})]})]})})]})}),(0,d.jsx)(U,{})]})}},36820:function(e,t,n){"use strict";var r=n(92228),a=n(50930),c=n(52322),i=n(2784),o=n(3411),s=n(78545),d=n(77064);function l(){var e=(0,r.Z)(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  padding-left: 4px;\n  padding-right: 4px;\n\n  "," {\n    padding-left: 8px;\n    padding-right: 8px;\n  }\n\n  "," {\n    padding-left: 16px;\n    padding-right: 16px;\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,r.Z)(["\n  align-items: center;\n  display: flex;\n  flex-wrap: wrap;\n  list-style-type: none;\n\n  a {\n    color: ",";\n\n    &:hover {\n      color: ",";\n    }\n  }\n\n  ","\n"]);return u=function(){return e},e}var p=o.ZP.div.withConfig({componentId:"sc-b9c7047c-0"})(l(),function(e){return e.theme.colors.textDisabled},function(e){return e.theme.mediaQueries.sm},function(e){return e.theme.mediaQueries.md}),h=o.ZP.ul.withConfig({componentId:"sc-b9c7047c-1"})(u(),function(e){return e.theme.colors.primary},function(e){return e.theme.colors.primaryBright},s.Dh),m=(0,c.jsx)(d.Z,{color:"currentColor",width:"24px"}),x=function(e){var t,n,r=e.separator,o=e.children,s=(t=i.Children.toArray(o).filter(function(e){return(0,i.isValidElement)(e)}),n=void 0===r?m:r,t.reduce(function(e,t,r){return 0===r?(0,a.Z)(e).concat([t]):(0,a.Z)(e).concat([(0,c.jsx)(p,{"aria-hidden":!0,children:n},"separator-".concat(r)),t,])},[]));return(0,c.jsx)(h,{children:s.map(function(e,t){return(0,c.jsx)("li",{children:e},"child-".concat(t))})})};t.Z=x}},function(e){e.O(0,[862,8417,8834,8782,7855,3623,4149,9774,2888,179],function(){return e(e.s=46109)}),_N_E=e.O()}]);
//# sourceMappingURL=create-068cf909b5f0dae0.js.map